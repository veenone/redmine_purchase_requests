<div class="contextual">
  <%= link_to l(:label_status_new), new_purchase_request_status_path, class: 'icon icon-add' %>
</div>

<h2><%= l(:label_purchase_request_statuses) %></h2>

<table class="list" style="width: 100%; max-width: 800px;">
  <thead>
    <tr>
      <th style="width: 30%"><%= l(:field_name) %></th>
      <th style="width: 10%"><%= l(:field_position) %></th>
      <th style="width: 15%"><%= l(:field_is_closed) %></th>
      <th style="width: 15%"><%= l(:label_status_color) %></th>
      <th style="width: 15%"><%= l(:label_status_is_default) %></th>
      <th style="width: 15%"></th>
    </tr>
  </thead>
  <tbody>
    <% @statuses.each do |status| %>
      <tr>
        <td><%= status.name %></td>
        <td><%= status.position %></td>
        <td><%= checked_image status.is_closed? if status.respond_to?(:is_closed?) %></td>
        <td style="text-align: center;">
          <span class="color-preview" style="display: inline-block; background-color: <%= status.color.presence || '#777777' %>; width: 25px; height: 25px; vertical-align: middle; border-radius: 4px;"></span>
          <span><%= status.color.presence || '#777777' %></span>
        </td>
        <td><%= checked_image status.is_default? if status.respond_to?(:is_default?) %></td>
        <td class="buttons">
          <%= link_to l(:button_edit), edit_purchase_request_status_path(status), class: 'icon icon-edit' %>
          <%= delete_link purchase_request_status_path(status) %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to l(:button_back), plugin_settings_path('redmine_purchase_requests'), class: 'icon icon-back' %>

<style>
  table.list th, table.list td {
    padding: 8px;
  }
  .color-preview {
    border: 1px solid #ddd;
  }
</style>